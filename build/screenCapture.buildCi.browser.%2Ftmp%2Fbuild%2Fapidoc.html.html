<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://sentsin.com/layui/laytpl/">laytpl (v1.3.5)</a>
</h1>
<h4>Ingenious JavaScript templates</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.laytpl">module laytpl</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.laytpl.__express">
            function <span class="apidocSignatureSpan">laytpl.</span>__express
            <span class="apidocSignatureSpan">(file, options, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.laytpl.config">
            function <span class="apidocSignatureSpan">laytpl.</span>config
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.laytpl.getParse">
            function <span class="apidocSignatureSpan">laytpl.</span>getParse
            <span class="apidocSignatureSpan">(tpl, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.laytpl.parse">
            function <span class="apidocSignatureSpan">laytpl.</span>parse
            <span class="apidocSignatureSpan">(tpl, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.laytpl.render">
            function <span class="apidocSignatureSpan">laytpl.</span>render
            <span class="apidocSignatureSpan">(tpl, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.laytpl.renderFile">
            function <span class="apidocSignatureSpan">laytpl.</span>renderFile
            <span class="apidocSignatureSpan">(file, options, fn)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.laytpl" id="apidoc.module.laytpl">module laytpl</a></h1>


    <h2>
        <a href="#apidoc.element.laytpl.__express" id="apidoc.element.laytpl.__express">
        function <span class="apidocSignatureSpan">laytpl.</span>__express
        <span class="apidocSignatureSpan">(file, options, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__express = function (file, options, fn){
  var tpl;
  if ('function' == typeof options) {
    fn = options, options = {};
  }
  options.filename = file;

  try {
    if(config.cache){
     tpl = options.cache || (function(){
      if(cache[file]){
        return cache[file];
      } else {
        return cache[file] = read(file, 'utf8');
      }
     }());
    } else {
      tpl = read(file, 'utf8');
    }
  } catch(err) {
    fn(err);
    delete cache[file];
    return;
  };
  fn(null, exports.render(tpl, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.laytpl.config" id="apidoc.element.laytpl.config">
        function <span class="apidocSignatureSpan">laytpl.</span>config
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">config = function (options){
  options = options || {};
  for(var i in options){
    config[i] = options[i];
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
});
```
## è‡ªå®šä¹‰åˆ†éš”ç¬¦(Custom delimiters)

Custom delimiters can also be applied globally:
```
laytpl.<span class="apidocCodeKeywordSpan">config</span>({
  open: '{{',
  close: '}}'
});
```
## ç¼“å­˜(cache)
laytplé»˜è®¤ä¸å¼€å¯ç¼“å­˜ï¼Œè¿™åœ¨ä½&nbsp;å¼€å‘æ—¶éžå¸¸æœ‰åˆ©ã€‚ä½†æ˜¯å½“ä½&nbsp;çš„æ¨¡ç‰ˆè¶³å¤Ÿç¨³å®šï¼Œä½&nbsp;å¦‚æžœéœ€è¦å¼€å¯è¯¥é¡¹ï¼Œåªéœ€è¦æŒ‰ä»¥ä¸‹è®¾ç½®å³å¯ï¼š
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.laytpl.getParse" id="apidoc.element.laytpl.getParse">
        function <span class="apidocSignatureSpan">laytpl.</span>getParse
        <span class="apidocSignatureSpan">(tpl, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getParse = function (tpl, options){
  var file = options.filename;
  tpl = '"use strict";var view = "' + exports.parse(tpl, options) + '";return view;';
  try {
    cache['tpl_' + file] = tpl = new Function('d, _escape_', tpl);
    return tpl(options, tool.escape);
  } catch(e) {
    delete cache['tpl_' + file];
    return tool.error(e);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.laytpl.parse" id="apidoc.element.laytpl.parse">
        function <span class="apidocSignatureSpan">laytpl.</span>parse
        <span class="apidocSignatureSpan">(tpl, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (tpl, options){
  var that = this, file = options.filename;
  var jss = exp('^'+config.open+'#', ''), jsse = exp(config.close+'$', '');
  tpl = tpl.replace(/[\r\t\n]+/g,  splitstr)
  .replace(exp(config.open+'#'), config.open+'# ')
  .replace(exp(config.close+'}'), '} '+config.close).replace(/\\/g, '\\\\')

  //ä¸åŒ¹é…æŒ‡å®šåŒºåŸŸçš„å†…å®¹
  .replace(exp(config.open + '!(.+?)!' + config.close), function(str){
    str = str.replace(exp('^'+ config.open + '!'), '')
    .replace(exp('!'+ config.close), '')
    .replace(exp(config.open + '|' + config.close), function(tag){
      return tag.replace(/(.)/g, '\\$1')
    });
    return str
  })

  //åŒ¹é…JSè§„åˆ™å†…å®¹
  .replace(/(?="|')/g, '\\').replace(tool.query(), function(str){
    str = str.replace(jss, '').replace(jsse, '');
    str = str.replace(exp(splitstr), '');
    return '";' + str.replace(/\\/g, '') + ';view+="';
  })

  //åŒ¹é…æ™®é€šå­—æ®µ
  .replace(tool.query(1), function(str){
    var start = '"+(';
    if(str.replace(/\s/g, '') === config.open+config.close){
      return '';
    }
    str = str.replace(exp(config.open+'|'+config.close), '');
    if(/^=/.test(str)){
      str = str.replace(/^=/, '');
      start = '"+_escape_(';
    }
    if(/^\s*include/.test(str)){
      var match = str.match(/^\s*include\s+([\s\S]+?)\s*$/)||[];
      if (!file) throw new Error('filename option is required for includes');
      if(!match[1]) return '';
      var newfile = tool.reinclude(match[1], file);
      return exports.parse(read(newfile, 'utf8'), options);
    }
    return start + str.replace(/\\/g, '') + ')+"';
  });
  return tpl;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.laytpl.render" id="apidoc.element.laytpl.render">
        function <span class="apidocSignatureSpan">laytpl.</span>render
        <span class="apidocSignatureSpan">(tpl, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">render = function (tpl, options){
  var that = this, file = options.filename;
  if(config.cache &amp;&amp; cache['tpl_' + file]){
    tpl = cache['tpl_' + file](options, tool.escape);
  } else {
    tpl = that.getParse(tpl, options);
  }
  return tpl.replace(exp(splitstr), config.min ? '' : '\n');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
{{ include footer }}
```

### ç¬¬ä¸‰æ­¥
æ¸²æŸ“(render)
```
app.get('/', function(req, res){
  res.<span class="apidocCodeKeywordSpan">render</span>('index', {
    user: {name: 'è´¤å¿ƒ'},
    intro: 'æ¥è‡ªä¸­å›½çš„å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ'
  });
});
```
## è‡ªå®šä¹‰åˆ†éš”ç¬¦(Custom delimiters)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.laytpl.renderFile" id="apidoc.element.laytpl.renderFile">
        function <span class="apidocSignatureSpan">laytpl.</span>renderFile
        <span class="apidocSignatureSpan">(file, options, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">renderFile = function (file, options, fn){
  var tpl;
  if ('function' == typeof options) {
    fn = options, options = {};
  }
  options.filename = file;

  try {
    if(config.cache){
     tpl = options.cache || (function(){
      if(cache[file]){
        return cache[file];
      } else {
        return cache[file] = read(file, 'utf8');
      }
     }());
    } else {
      tpl = read(file, 'utf8');
    }
  } catch(err) {
    fn(err);
    delete cache[file];
    return;
  };
  fn(null, exports.render(tpl, options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>